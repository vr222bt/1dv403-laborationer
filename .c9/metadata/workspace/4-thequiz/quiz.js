{"changed":true,"filter":false,"title":"quiz.js","tooltip":"/4-thequiz/quiz.js","value":"\"use strict\";\n\n\nvar Quiz = {\n    newURL: \"http://vhost3.lnu.se:20080/question/1\",\n    guesses: 0,\n    totalGuesses: [],\n    \n    init: function(){\n        Quiz.getQuestion();\n    },\n    render: function(response){\n        \n        var question = document.querySelector(\"#question\");\n        question.innerHTML = response.question;\n\n    },\n    getQuestion: function(){\n        var xhr = new XMLHttpRequest();\n\n        xhr.onreadystatechange = function (){\n            if (xhr.readyState === 4) {\n                if (xhr.status == 200) {\n                    var response = JSON.parse(xhr.responseText);\n                    console.log(response);\n                    Quiz.render(response);\n                    Quiz.newURL = response.nextURL;\n                    var button = document.querySelector(\"#button\");\n                    button.onclick = function(e){\n                        e.preventDefault();\n                        Quiz.sendAnswer(response);\n                    };\n                    var textarea = document.querySelector(\"#answer\");\n                    textarea.onkeypress = function(e){\n                      if (!e) {  \n                          e = window.event; \n                          }  \n                      if (e.keyCode === 13) {\n                          e.preventDefault();\n                          Quiz.sendAnswer(response);\n                      }\n                    };\n                }\n            }\n            \n        };\n        \n        xhr.open(\"GET\", Quiz.newURL , true);\n        \n        xhr.send(null);\n        \n\n    },\n    sendAnswer: function(response){\n        var xhr = new XMLHttpRequest();\n        \n        xhr.onreadystatechange = function(){\n            if (xhr.readyState === 4 ) {\n                if (xhr.status === 200) {\n                    Quiz.guesses += 1;\n                    Quiz.totalGuesses.push(Quiz.guesses);\n                    Quiz.guesses = 0;\n                    console.log(Quiz.totalGuesses);\n                    var newResponse = JSON.parse(xhr.responseText);\n                    console.log(newResponse);\n                    Quiz.correctMessage(answer);\n                    Quiz.newURL = newResponse.nextURL;\n                    Quiz.getQuestion();\n                    if (newResponse.nextURL === undefined) {\n                        Quiz.scoreScreen();\n                        alert(\"du vann\");\n                    }\n                    \n                }\n                if (xhr.status === 400) {\n                    Quiz.guesses += 1;\n                    Quiz.wrongMessage(answer);\n                }\n                else{\n                    var newResponse2 = JSON.parse(xhr.responseText);\n                    console.log(newResponse2);\n                }\n                   \n            }\n        };\n        xhr.open(\"POST\", Quiz.newURL, true);\n        xhr.setRequestHeader(\"Content-Type\", \"application/json;charset=UTF-8\");\n        var answer = document.querySelector(\"#answer\").value;\n        console.log(answer);\n        var rply = {\n            id: 1,\n            answer: answer,\n        };\n        xhr.send(JSON.stringify(rply));\n       \n    },\n    correctMessage: function(answer){\n        document.querySelector(\"#button\").classList.remove(\"error\");\n        var pError = document.querySelector(\"#error\");\n        pError.innerHTML = \"\";\n\n    },\n    wrongMessage: function(answer){\n        document.querySelector(\"#button\").className = \"error\";\n        var p = document.querySelector(\"#error\");\n        p.className = \"error\";\n        p.innerHTML = \"Fel svar (\" + answer +\")\";\n        \n    },\n    scoreScreen: function(){\n        var main = document.querySelector(\"main\");\n        var header = document.createElement(\"h2\");\n        header.innerHTML = \"Resultat:\";\n\n        main.appendChild(header);\n        var table = document.createElement(\"table\");\n        var tbody = document.createElement(\"tbody\");\n        table.appendChild(tbody);\n        \n        for (var i = 0; i < 2; i++) {\n            var tr = document.createElement(\"tr\");\n            tbody.appendChild(tr);\n            for (var j = 0; j < Quiz.totalGuesses.length + 1; j++) {\n                        var td = document.createElement(\"td\");\n                        if (j === 0 && i === 0) {\n                            td.innerHTML = \"Fråga\";\n                        }\n                        else if (i === 0) {\n                            td.innerHTML = j;\n                        }\n                        else {\n                            if (j === 0 && i === 1) {\n                                td.innerHTML = \"Försök\";\n                            }\n                            else{\n                                td.innerHTML = Quiz.totalGuesses[j - 1];\n                            }\n                            \n                        }\n                        \n\n                        tr.appendChild(td);\n            }\n        }\n        \n        main.appendChild(table);\n\n    }\n};\n\nwindow.onload = Quiz.init;","undoManager":{"mark":87,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":126,"column":0},"end":{"row":126,"column":4},"action":"insert","lines":["    "]},{"start":{"row":127,"column":0},"end":{"row":127,"column":4},"action":"insert","lines":["    "]},{"start":{"row":128,"column":0},"end":{"row":128,"column":4},"action":"insert","lines":["    "]},{"start":{"row":129,"column":0},"end":{"row":129,"column":4},"action":"insert","lines":["    "]},{"start":{"row":130,"column":0},"end":{"row":130,"column":4},"action":"insert","lines":["    "]},{"start":{"row":131,"column":0},"end":{"row":131,"column":4},"action":"insert","lines":["    "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":49},"end":{"row":105,"column":0},"action":"insert","lines":["",""]},{"start":{"row":105,"column":0},"end":{"row":105,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":8},"end":{"row":105,"column":9},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":9},"end":{"row":105,"column":10},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":10},"end":{"row":105,"column":19},"action":"insert","lines":["className"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":19},"end":{"row":105,"column":20},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":20},"end":{"row":105,"column":21},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":21},"end":{"row":105,"column":22},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":22},"end":{"row":105,"column":24},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":23},"end":{"row":105,"column":24},"action":"insert","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":23},"end":{"row":105,"column":24},"action":"remove","lines":["E"]},{"start":{"row":105,"column":23},"end":{"row":105,"column":28},"action":"insert","lines":["Error"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":23},"end":{"row":105,"column":24},"action":"remove","lines":["E"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":23},"end":{"row":105,"column":24},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":105,"column":29},"end":{"row":105,"column":30},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":110,"column":50},"end":{"row":111,"column":0},"action":"insert","lines":["",""]},{"start":{"row":111,"column":0},"end":{"row":111,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":8},"end":{"row":111,"column":9},"action":"insert","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":9},"end":{"row":111,"column":10},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":10},"end":{"row":111,"column":11},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":11},"end":{"row":111,"column":12},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":12},"end":{"row":111,"column":13},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":13},"end":{"row":111,"column":14},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":14},"end":{"row":111,"column":15},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":15},"end":{"row":111,"column":16},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":16},"end":{"row":111,"column":17},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":17},"end":{"row":111,"column":18},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":18},"end":{"row":111,"column":19},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":19},"end":{"row":111,"column":20},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":20},"end":{"row":111,"column":21},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":21},"end":{"row":111,"column":22},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":22},"end":{"row":111,"column":23},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":23},"end":{"row":111,"column":24},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":24},"end":{"row":111,"column":25},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":21},"end":{"row":111,"column":25},"action":"remove","lines":["docu"]},{"start":{"row":111,"column":21},"end":{"row":111,"column":29},"action":"insert","lines":["document"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":29},"end":{"row":111,"column":30},"action":"insert","lines":[","]},{"start":{"row":111,"column":30},"end":{"row":111,"column":31},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":30},"end":{"row":111,"column":31},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":29},"end":{"row":111,"column":30},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":29},"end":{"row":111,"column":30},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":30},"end":{"row":111,"column":31},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":31},"end":{"row":111,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":30},"end":{"row":111,"column":32},"action":"remove","lines":["cr"]},{"start":{"row":111,"column":30},"end":{"row":111,"column":45},"action":"insert","lines":["createElement()"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":44},"end":{"row":111,"column":46},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":45},"end":{"row":111,"column":46},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":46},"end":{"row":111,"column":47},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":49},"end":{"row":111,"column":50},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":50},"end":{"row":112,"column":0},"action":"insert","lines":["",""]},{"start":{"row":112,"column":0},"end":{"row":112,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":8},"end":{"row":112,"column":9},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":9},"end":{"row":112,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":10},"end":{"row":112,"column":11},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":11},"end":{"row":112,"column":12},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":12},"end":{"row":112,"column":13},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":13},"end":{"row":112,"column":14},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":14},"end":{"row":112,"column":15},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":15},"end":{"row":112,"column":16},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":16},"end":{"row":112,"column":17},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":17},"end":{"row":112,"column":18},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":15},"end":{"row":112,"column":18},"action":"remove","lines":["inn"]},{"start":{"row":112,"column":15},"end":{"row":112,"column":24},"action":"insert","lines":["innerHTML"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":24},"end":{"row":112,"column":25},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":25},"end":{"row":112,"column":26},"action":"insert","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":26},"end":{"row":112,"column":27},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":27},"end":{"row":112,"column":29},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":28},"end":{"row":112,"column":29},"action":"insert","lines":["R"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":29},"end":{"row":112,"column":30},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":30},"end":{"row":112,"column":31},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":31},"end":{"row":112,"column":32},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":32},"end":{"row":112,"column":33},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":33},"end":{"row":112,"column":34},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":34},"end":{"row":112,"column":35},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":35},"end":{"row":112,"column":36},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":36},"end":{"row":112,"column":37},"action":"insert","lines":[":"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":38},"end":{"row":112,"column":39},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":39},"end":{"row":113,"column":0},"action":"insert","lines":["",""]},{"start":{"row":113,"column":0},"end":{"row":113,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":8},"end":{"row":113,"column":9},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":9},"end":{"row":113,"column":10},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":10},"end":{"row":113,"column":11},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":11},"end":{"row":113,"column":12},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":12},"end":{"row":113,"column":13},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":13},"end":{"row":113,"column":26},"action":"insert","lines":["appendChild()"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":25},"end":{"row":113,"column":26},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":26},"end":{"row":113,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":27},"end":{"row":113,"column":28},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":28},"end":{"row":113,"column":29},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":29},"end":{"row":113,"column":30},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":30},"end":{"row":113,"column":31},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":32},"end":{"row":113,"column":33},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":112,"column":39},"end":{"row":113,"column":0},"action":"insert","lines":["",""]},{"start":{"row":113,"column":0},"end":{"row":113,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":8},"end":{"row":113,"column":9},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":9},"end":{"row":113,"column":10},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":10},"end":{"row":113,"column":11},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":11},"end":{"row":113,"column":12},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":12},"end":{"row":113,"column":13},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":12},"end":{"row":113,"column":13},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":11},"end":{"row":113,"column":12},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":10},"end":{"row":113,"column":11},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":9},"end":{"row":113,"column":10},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":8},"end":{"row":113,"column":9},"action":"remove","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":4},"end":{"row":113,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":0},"end":{"row":113,"column":4},"action":"remove","lines":["    "]}]}]]},"ace":{"folds":[],"scrolltop":1671,"scrollleft":0,"selection":{"start":{"row":113,"column":0},"end":{"row":113,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":41,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1420932993887}